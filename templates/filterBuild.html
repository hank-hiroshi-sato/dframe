<!DOCTYPE html>

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

{% block extra_css %}{% endblock %}
<title>{% block title %}dFrame{% endblock %}</title>

</head>
<body>
<form  method="POST" >  
    
    <h4 class="mt-4 border-bottom">ビューの編集
        <p >    
        ビュー名：
        <input type="text" name=viewName  value={{viewName}}>                    
        </p>
    </h4>

    <table class="table table-striped table-bordered">
        <thead>
          <tr>
            {% for i in range( formColumns|length) %}
                {% if formColumns[i]['isVisible']==1 and formColumns[i]['name']!='andOr' %}
                    <th scope="column">{{formColumns[i]['caption']}}</th> 
                {% endif %}
            {% endfor %} 
          </tr>
        </thead>
        <tbody>
          {% for  d in range(5) %}
            <tr>
                {% for  c in range( formColumns|length) %}
                    <td scope="row"  >
                        {% if formColumns[c]['isVisible']==1 and formColumns[c]['slctStyle']=='lookup' and formColumns[c]['name']!='andOr' %}
                            <select name={{d}}_{{formColumns[c]['name']}}>
                                <!-- fieldName selection --> 
                                {% if formColumns[c]['name']=='fieldName' %} 
                                    {% for i in range(viewSelFldList|length) %} 
                                        {% if lenFormData > d and viewSelFldList[i]['value'] == fldVal[d][c] %}
                                            <option value= {{viewSelFldList[i]['value']}} selected>
                                                {{viewSelFldList[i]['caption']}} 
                                            </option>
                                        {% else %}
                                            <option value= {{viewSelFldList[i]['value']}} >
                                                {{viewSelFldList[i]['caption']}} 
                                            </option>
                                        {% endif %}
                                    {% endfor %}
                                <!-- operator selection -->    
                                {% elif formColumns[c]['name']=='fieldOperator' %}
                                    {% for b in range(baseValueList|length) %} 
                                        {% if baseValueList[b]['catName'] == 'fieldOperator' or baseValueList[b]['catName'] == '' %}
                                            {% if lenFormData>d and baseValueList[b]['value'] == fldVal[d][c] %}
                                                <option value= {{baseValueList[b]['value'] }} selected>
                                                    {{baseValueList[b]['caption']}}
                                                </option>
                                            {% else %}
                                                <option value= {{baseValueList[b]['value'] }} >
                                                    {{baseValueList[b]['caption']}}
                                                </option>
                                            {% endif  %}
                                        {% endif  %}
                                    {% endfor %}
                                {% endif %}
                            </select>         
                        <!-- value selection -->    
                        {% elif formColumns[c]['isVisible']==1 and formColumns[c]['name']!='andOr' %}
                            {% if lenFormData > d %}
                                <input type="text" name={{d}}_{{formColumns[c]['name']}} value={{fldVal[d][c]}} >    
                            {% else %}                            
                                <input type="text" name={{d}}_{{formColumns[c]['name']}} value='' > 
                            {% endif %}        
                        <!-- not-visible data selection -->  
                        {% elif formColumns[c]['isVisible']==0 %}
                            {% if lenFormData > d %}
                                <input type="text" name={{d}}_{{formColumns[c]['name']}} value={{fldVal[d][c]}} style="display : none">    
                            {% else %}                            
                                <input type="text" name={{d}}_{{formColumns[c]['name']}} value=''  style="display : none">  
                            {% endif %}
                        {% endif %}
                    </td> 
                {% endfor %} 
            </tr>
            <tr>                
                <td scope="row"  >                          
                    <!-- andOr selection -->   
                    <select name={{d}}_andOr>
                        {% for b in range(baseValueList|length) %} 
                            {% if baseValueList[b]['catName'] == 'andOr' or baseValueList[b]['catName'] == ''%}
                                {% if lenFormData-1>d and baseValueList[b]['value'] == fldVal[d][3] %}
                                    <option value= {{baseValueList[b]['value']}} selected>
                                        {{baseValueList[b]['caption']}}
                                    </option>
                                {% else %}
                                    <option value= {{baseValueList[b]['value'] }} >
                                        {{baseValueList[b]['caption']}}
                                    </option>
                                {% endif  %}
                            {% endif  %}
                        {% endfor %}
                    </select>     
                </td> 
            </tr>
          {% endfor %}
        </tbody>
      </table>

    {% for b in range(formButton|length) %}  
        <button type="submit" formaction="/dframe/navi/btn/{{btnList[b]}}/{{formID}}/{{roleID}}/?viewID={{viewID}}">
           {{formButton[b]['caption']}} 
        </button>
    {% endfor %}
</form>
</div>