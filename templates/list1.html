{% extends 'base.html' %}

{% block title %}dFrame{% endblock title %}

{% block content %}
  <h4 class="mt-4 border-bottom">{{formPrpty[0]['Title']}}の一覧  
    <form  method="POST" >
      <p >        
        ビュー：
        <select name=viewSelID onchange="submit(this.form)">
          {% for i in range(listViewName|length) %}  
            {% if listViewName[i]['id'] == viewID %}         
              <option value= {{listViewName[i]['id']}} selected >
                  {{listViewName[i]['name']}}
              </option>
            {% else %}         
                <option value= {{listViewName[i]['id']}} >
                    {{listViewName[i]['name']}}
                </option>
            {% endif %}
          {% endfor %}
        </select>
        　
        <button type="submit" formaction="/dframe/view/{{formID}}/{{roleID}}/{{viewID}}/">
          編集
        </button>
        <button type="submit" formaction="/dframe/view/{{formID}}/{{roleID}}/0/">
          新規
        </button>
      </p>
    </form>
  </h4>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        {% for  i in range( formColumns|length) %}
          <th scope="row">{{formColumns[i]['caption']}}</th> 
        {% endfor %} 
      </tr>
    </thead>
    <tbody>
      {% for  i in range( formData|length) %}
        <tr>
          {% for  l in fldList %}  
            {% if l == 'id' %}
            <td scope="row">
              {% if baseFormID == 0  %}
                <button onclick="location.href='/dframe/navi/form/{{formData[i][l]}}/{{roleID}}/0'">
              {% else %}
                <button onclick="location.href='/dframe/navi/form/{{baseFormID}}/{{roleID}}/{{idList[i]}}/ '">                
              {% endif %}
                  編集
              </button>
            </td>
            {% else %}
              <td scope="row">{{formData[i][l]}} </td> 
            {% endif %}
          {% endfor %} 
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock content %}

